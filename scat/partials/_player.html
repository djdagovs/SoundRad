<!-- TO DO -->

<!-- Better private track design -->
<!-- Account for unstreamable tracks -->
<!-- Seeking state - audio.seeking -->
<!-- Better actions design -->
<!-- Build player queue factory -->

  <div class="player bobo" id="{{track.permalink}}" ng-class="{'playing bg-text2': isPlaying(track) || isPaused(track), 'unstreamable bg-mdgry': !track.streamable}" ng-switch on="!!track.tracks" ng-controller="PlayerCtrl">
    <!-- Track -->
    <div ng-switch-when="false">    
      <a href="" class="play sq64 lh64 text-center no-touch-color" ng-class="{mdgry: player.paused.id != track.id, 'wht bg-prime': isPaused(track)}" ng-click="player.play(tracks, $index)" ng-hide="isPlaying(track)"><i class="i-jxn-play h5 disb anim-hack anim-popin"></i></a>
      <a href="" class="pause sq64 lh64 text-center wht bg-prime no-touch-color" ng-click="player.pause(track)" ng-show="isPlaying(track) && !audioReady()"><i class="icon i-jxn-loading h4 wht disb center anim-spin"></i></a>
      <a href="" class="pause sq64 lh64 text-center wht bg-prime no-touch-color" ng-click="player.pause(track)" ng-show="isPlaying(track) && audioReady()"><i class="i-jxn-pause h5 disb anim-hack anim-popin"></i></a>    
      
      <div class="bd disb posrel hi64 text no-touch-color" ng-class="{wht: isPlaying(track) || isPaused(track)}">
        <h2 class="artist posabs to0 z128 marl h6 lh1-25 gry marto- reg truncate overhide padr" ng-class="{wht: isPlaying(track) || isPaused(track)}">{{track.user.username}}<small class="" ng-show="track.sharing == 'private'"> [private]</small></h2>
        <h3 class="title posabs to26 z128 marl h4 lh1-25 b truncate overhide padr" ng-class="{wht: isPlaying(track) || isPaused(track)}">{{track.title}}</h3>
        <div ng-show="isPlaying(track) || isPaused(track)" ng-switch on="isPlaying(track) || isPaused(track)">      
          <div class="time-span w100 hi64" ng-switch-when="true" ng-controller="ScrubberCtrl">
            <div class="scrubber w100 hi64 posabs z256 no-touch-color" ng-click="seekTo($event)"></div> <!-- ng-hide="audio.readyState != 4"  -->
            <div class="buffer posabs to0 bo0 l0 bg-text" style="width: {{currentBufferPercentage}}%"></div>
            <div class="played posabs to0 bo0 l0 bg-prime" style="width: {{currentTimePercentage}}%"></div>
            <p class="time wht marr posabs to0 r0 sm lh24 anim-hack anim-slideleft" ng-show="isPlaying(track) && audioReady()">{{currentTimeMS | playTime}} | {{durationMS | playTime}}</p>
          </div>
        </div>

        <div click-out="closeActions()">
          <a href="" ng-click="toggleActions()" class="posabs r0 to0 bo0 z256 gry lh64 tappad"><i class="h6 i-jxn-carat" ng-class="{wht: isPlaying(track) || isPaused(track)}"></i></a>
          
          <div class="jx-actions posabs to0 r0 bo0 z384 pad- bg-text" style="display:none" ng-show="viewActions" ng-animate="'slideleft'" ng-controller="TrackCtrl">
            <a href="" ng-click="toggleLoop()" ng-class="{gry: !player.loop}" class="tappad fl h4"><i class="icon i-jxn-loop"></i></a>
  <!--           <a ng-href="#/{{track.user.permalink}}/{{track.permalink}}" class="tappad fl gry h4"><i class="icon i-jxn-link"></i></a> -->
            <a href="" ng-click="like(track.id)" ng-hide="track.user_favorite" class="tappad fl gry h4"><i class="icon i-jxn-heart"></i></a>
            <a href="" ng-click="unlike(track.id)" ng-show="track.user_favorite" class="tappad fl prime h4"><i class="icon i-jxn-heart"></i></a>        
            <a href="" ng-click="openTrack(track)" ng-show="viewActions" class="posabs r0 to0 bo0 z512 gry lh64 tappad"><i class="h6 i-jxn-carat" ng-class="{wht: isPlaying(track) || isPaused(track)}"></i></a>
          </div>
        </div>

      </div>
      
    </div>
    
    <!-- Set -->
    <div ng-switch-when="true">
      <a href="" ng-click="openSet(track)" class="disb active overhide pad">
        <p class="lh1">{{track.user.username}}</p>
        <h4 class="disib b">{{track.title}}</h4>
      </a>
     
    </div>
    
<!--   <div class="posabs to0 r0 bo0 l0 bg-gry z384">Action Closer</div> -->

  </div> 
