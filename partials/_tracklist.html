<!-- Tracklist -->

<div ng-show="contentLoading" class="tappad gray5 txtcen">Loading...</div>
<div ng-hide="contentLoading">

  <div ng-show="set" class="media borbot bor-gray2">
    <div class="img">
      <a href="" ng-click="player.play(tracks, 0)" ng-hide="player.playing || player.paused" class="db sq4 lh4 txtcen gray5"><i class="icon icon-geo-play"></i></a>
      <a href="" ng-click="player.play(tracks, player.i)" ng-show="player.paused" class="db sq4 lh4 txtcen gray5"><i class="icon icon-geo-play"></i></a>
      <a href="" ng-click="player.pause(player.playing)" ng-show="player.playing" class="db sq4 lh4 txtcen"><i class="icon icon-geo-pause"></i></a>
    </div>
    <div class="bd">
      <h2 class="lh4">{{set.title}}</h2>
    </div>
  </div>

  <div ng-repeat="track in tracks" ng-switch="!!track.tracks" class="posrel" ng-controller="TrackCtrl">
    <div ng-switch-when="false" class="media maxhi4 borbot bor-gray2">
      <div class="img">
        <a href="" ng-click="player.play(tracks, $index)" ng-hide="player.playing.id == track.id" class="db sq4 lh4 txtcen gray5"><i class="icon icon-geo-play"></i></a>
        <a href="" ng-click="player.pause(track)" ng-show="player.playing.id == track.id" class="db sq4 lh4 txtcen"><i class="icon icon-geo-pause"></i></a>
      </div>
      <div class="bd posrel minhi4">
        <a ng-href="/{{track.user.permalink}}" class="db mt-5 gray5 truncate pr">{{track.user.username}}</a>
        <a href="" ng-click="preload('/' + track.user.permalink + '/' + track.permalink, track)" class="db h3 b text truncate pr">{{track.title}}</a>

        <!-- <a href="" class="posabs right1 top1 db sq2 lh2 txtcen gray5 h1 bold" ng-click="toggleActions()">+</i></a> -->
        
        <!-- Lower right placement -->
<!--
        <div
          ng-include src="'/partials/_trackactions.html'"
          class="posabs bot0 right0 bg-gray2 lh1 sm">
        </div>
-->
        
      </div>
    </div>

    <!-- Outside Placement -->    
<!--
    <div
      ng-show="showActions"
      ng-include src="'/partials/_trackactions.html'"
      class="posabs top1 right1 z1 pad-5 bg-gray2 rc">
    </div>
-->


    
    <div ng-switch="isDetail">
      <div ng-switch-when="true" ng-controller="TrackCtrl">
        
        <div ng-switch="!!setTrack" class="tappad-s borbot bor-gray2">
    
          <div ng-switch-when="false" class="overhide">
            <a class="fl tappad gray5" href="" ng-click="like(track.id)" ng-hide="track.user_favorite"><i class="icon icon-geo-heart db lh3 h3"></i></a>
            <a class="fl tappad" href="" ng-click="unlike(track.id)" ng-show="track.user_favorite"><i class="icon icon-geo-heart db lh3 h3"></i></a>
          </div>
          
          <div ng-switch-when="true" class="overhide">
            <a class="fl tappad gray5" href="" ng-click="like(setTrack.id, 'isSetTrack')" ng-hide="setTrack.user_favorite db lh3 h3">Like</a>
            <a class="fl tappad" href="" ng-click="unlike(setTrack.id, 'isSetTrack')" ng-show="setTrack.user_favorite db lh3 h3">Unlike</a>
          </div>
        
        </div>
        
        <div class="pad borbot bor-gray2" ng-show="track.description">
          <p class="maxwi4" ng-bind-html-unsafe="track.description | richtext"></p>
        </div>
         
        <a ng-href="{{track.permalink_url}}" target="_blank" class="db tappad-s gray5 borbot bor-gray2">View on SoundCloud</a>
      </div>
    </div>

    <div ng-switch-when="true" class="">
      <div id="{{track.id}}" class="media borbot bor-gray2">
        <div class="img">
          <a href="" ng-click="[preload('/' + track.user.permalink + '/sets/' + track.permalink, track.tracks), player.play(track.tracks, 0)]" ng-hide="player.tracks == track.tracks && (player.playing || player.paused)" class="db sq4 lh4 txtcen gray5"><i class="icon icon-geo-play"></i></a>
        </div>
        <div class="bd">
          <a ng-href="/{{track.user.permalink}}" class="db mt-5 gray5 truncate pr">{{track.user.username}}</a>
          <a href="" ng-click="preload('/' + track.user.permalink + '/sets/' + track.permalink, track.tracks)" class="db h3 b text truncate pr">{{track.title}}</a>
        </div>
        
        <div ng-show="showActions" ng-include src="'/partials/_trackactions.html'" ng-controller="TrackCtrl"></div>
        
      </div>
      
    </div>

  </div>


</div>

<div class="tappad mb txtcen overhide">
  <a href="" ng-show="hasPrevPage" ng-click="prevPage()" class="tappad fl">Previous</a>
  <a href="" ng-show="hasNextPage" ng-click="nextPage()" class="tappad fr">Next</a>
  
  <a href="" ng-show="streamNextPage" ng-click="showMoreStream()" class="db tappad">Show More</a>
</div>
